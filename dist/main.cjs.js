var g=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var C=(a,t)=>{for(var c in t)g(a,c,{get:t[c],enumerable:!0})},L=(a,t,c,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let f of M(t))!w.call(a,f)&&f!==c&&g(a,f,{get:()=>t[f],enumerable:!(u=F(t,f))||u.enumerable});return a};var A=a=>L(g({},"__esModule",{value:!0}),a);var O={};C(O,{FormManager:()=>v});module.exports=A(O);var b=require("check-rule-mate");function j(a,t,c,u,f){let m=(0,b.createValidator)(h(a),{validationHelpers:u,rules:c,schema:t,errorMessages:f,options:{abortEarly:!1,propertiesMustMatch:!1}}),p={onceError:!1};async function S(e){if(!p.onceError||!t[e.target.name])return;let s=h(a);m.setData({...s,[e.target.name]:e.target.value});let o=await m.validateField(e.target.name);E(e.target,o==null?void 0:o.errors)}async function q(e){return e.preventDefault(),new Promise(async(s,o)=>{let n=h(a);m.setData(n);let r=await m.validate();r.error?(p.onceError=!0,a.querySelectorAll("input, select, textarea").forEach(i=>{var l;E(i,(l=r==null?void 0:r.errors)==null?void 0:l[i.name])}),s({...r,formData:n})):r.ok&&s({...r,formData:n}),o({error:!0})})}function x(){a.querySelectorAll("input, select, textarea").forEach(e=>{let s=e.parentElement,o=s.querySelector(".check-rule-mate-error");e.value="",s.classList.remove("field-error"),o&&s.removeChild(o)}),p.onceError=!1}function h(e){let s=e.querySelectorAll("input, textarea, select"),o={};return s.forEach(n=>{let{name:r,type:i,value:l,checked:d}=n;r&&(i==="checkbox"||i==="radio"?d&&(o[r]=l):o[r]=l)}),o}function D(){Object.keys(t).forEach(e=>{var s,o;(s=c[t[e].rule])!=null&&s.attributes&&Object.keys((o=c[t[e].rule])==null?void 0:o.attributes).forEach(n=>{var r,i,l;if((i=(r=c[t[e].rule])==null?void 0:r.attributes)!=null&&i[n]){let d=a.querySelector(`input[name=${e}]`);d[n]=(l=c[t[e].rule])==null?void 0:l.attributes[n]}}),t[e].attributes&&Object.keys(t[e].attributes).forEach(n=>{if(n==="label"){let r=a.querySelector(`label[for=${e}]`);r.textContent=t[e].attributes[n]}else{let r=a.querySelector(`input[name=${e}]`);r[n]=t[e].attributes[n]}})})}function E(e,s){let o=e.parentElement,n=o.querySelector(".check-rule-mate-error");if(o.classList.add("field-error"),s)if(n)n.textContent=s.message;else{let r=window.document.createElement("span");r.classList.add("check-rule-mate-error"),r.innerHTML=s.message,o.appendChild(r)}else o.classList.remove("field-error"),n&&o.removeChild(n)}return{handleFormSubmit:q,handleFormReset:x,handleInputChange:S,addAttributes:D,getFormData:h}}var v=j;0&&(module.exports={FormManager});
